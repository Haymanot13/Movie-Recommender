<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Accordion?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Rectangle?>

<StackPane fx:id="mainStackPane" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.moviesrecommendation.HelloController" styleClass="root">

    <ImageView fx:id="backgroundImageView" preserveRatio="false" style="-fx-opacity: 0.5;"/>
    <Rectangle fx:id="backgroundOverlay" width="2000" height="2000" opacity="0.7" mouseTransparent="true" style="-fx-fill: linear-gradient(to top, black 0%, transparent 100%);"/>

    <VBox>
        <HBox fx:id="titleBar" alignment="CENTER_LEFT" styleClass="title-bar">
            <Label text="ðŸ‘©â€ðŸŽ“ Movie Recommender" styleClass="title-bar-text"/>
            <HBox HBox.hgrow="ALWAYS"/>
            <Button text="â€”" onAction="#onMinimize" styleClass="window-button"/>
            <Button text="ðŸ—–" onAction="#onMaximize" styleClass="window-button"/>
            <Button text="âœ–" onAction="#onClose" styleClass="window-button-close"/>
        </HBox>

        <BorderPane fx:id="rootPane" VBox.vgrow="ALWAYS">
            <top>
                <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header">
                    <padding>
                        <Insets left="20" right="20" top="15" bottom="15"/>
                    </padding>
                    <Label text="ðŸŽ¬ Movie Recommender" styleClass="app-title"/>
                    <VBox HBox.hgrow="ALWAYS" alignment="CENTER">
                        <HBox styleClass="search-container" alignment="CENTER_LEFT" maxWidth="400">
                            <Label text="ðŸ”" styleClass="search-icon" onMouseClicked="#onSearch"/>
                            <TextField fx:id="searchField" promptText="Search title, country, 'trending'..." HBox.hgrow="ALWAYS" styleClass="search-input" onAction="#onSearch"/>
                        </HBox>
                    </VBox>
                    <Button fx:id="vibeFinderButton" text="âœ¨ VibeFinder" onAction="#onVibeFinderClicked" styleClass="vibe-finder-button"/>
                </HBox>
            </top>

            <left>
                <VBox styleClass="sidebar">
                    <HBox styleClass="media-toggle-bar">
                        <ToggleButton fx:id="moviesToggle" text="Movies" selected="true" styleClass="media-toggle-button"/>
                        <ToggleButton fx:id="seriesToggle" text="Series" styleClass="media-toggle-button"/>
                    </HBox>
                    <VBox spacing="10" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="15" left="10" right="10" bottom="15"/>
                        </padding>
                        <Button text="Popular" onAction="#onPopularClicked" styleClass="sidebar-button" maxWidth="Infinity"/>
                        <Button text="Recent" onAction="#onRecentClicked" styleClass="sidebar-button" maxWidth="Infinity"/>
                        <Button text="Old" onAction="#onOldClicked" styleClass="sidebar-button" maxWidth="Infinity"/>

                        <Label text="Discover" styleClass="sidebar-title" fx:id="specialsLabel"/>
                        <MenuButton fx:id="culturalSpotlightsMenu" text="ðŸŒ Cultural Spotlights" styleClass="sidebar-button" maxWidth="Infinity"/>

                        <Accordion styleClass="accordion-transparent">
                            <panes>
                                <TitledPane text="Type" styleClass="titled-pane-transparent">
                                    <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="sidebar-scroll">
                                        <VBox fx:id="genreContainer" spacing="5"/>
                                    </ScrollPane>
                                </TitledPane>
                                <TitledPane text="Year" styleClass="titled-pane-transparent">
                                    <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="sidebar-scroll">
                                        <VBox fx:id="yearContainer" spacing="5"/>
                                    </ScrollPane>
                                </TitledPane>
                            </panes>
                        </Accordion>
                    </VBox>
                </VBox>
            </left>

            <center>
                <StackPane>
                    <VBox fx:id="welcomeBox" alignment="CENTER" spacing="20">
                         <padding>
                            <Insets bottom="50"/>
                         </padding>
                         <Label text="Ready to find your next favorite movie?" styleClass="welcome-text"/>
                         <Label text="Search above or select a category." styleClass="welcome-subtext"/>
                </VBox>
                <ScrollPane fx:id="scrollPane" fitToWidth="true" vbarPolicy="AS_NEEDED" style="-fx-background-color: transparent; -fx-background: transparent;">
                    <FlowPane fx:id="moviesBox" hgap="20" vgap="20" alignment="CENTER">
                        <padding>
                            <Insets top="20" bottom="20" left="20" right="20"/>
                        </padding>
                    </FlowPane>
                </ScrollPane>
            </StackPane>
        </center>
    </BorderPane>
    </VBox>
</StackPane>